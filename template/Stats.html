<html>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-image: linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)),url(StocksBackground.jpg);
        }
        p {
        color: white;
        }
        h1{
        color: white;
        }
        .center{
        text-align: center;
        }
    </style>    
    <body>
        <div class="banner">
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <div class="navbar">
                <img src="StocksLogo.png" class="logo">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#">Game</a></li>
                    <li><a href="#">Stats</a></li>
                    <li><a href="about.html">About</a></li>
                </ul>
            </div>

        <title>The Stock Guessing Game</title>
        <h1 class="center">Today's Stock: Google</h1>
        <h1 class="center" id="stockPrice"></h1>

        <img class ="center" src="google.png"
        width="70" 
        height="70">

        <script>
        document.addEventListener("DOMContentLoaded", function () {
        const apiKey = 'cjtnki9r01qr9581rns0cjtnki9r01qr9581rnsg';
        const symbol = 'GOOGL';
        const apiUrl = `https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${apiKey}`;

        // Add this to create a variable to store stock prices
        let stockPrices = [];

        // Function to update the chart
        function updateChart() {
            const ctx = document.getElementById('stockChart').getContext('2d');

            // Use Chart.js to create a line chart
            const myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: stockPrices.map(entry => entry.time),
                    datasets: [{
                        label: 'Stock Price',
                        data: stockPrices.map(entry => entry.price),
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1,
                        fill: false,
                    }]
                },
            });
        }

        function fetchData() {
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const stockPrice = data.c;
                    const currentTime = new Date().toLocaleTimeString();

                    // Add the new stock price entry to the array
                    stockPrices.push({ time: currentTime, price: stockPrice });

                    // Update the chart
                    updateChart();
                })
                .catch(error => console.error('Error fetching stock price:', error));
        }

        // Fetch data every 5 seconds
        setInterval(fetchData, 5000);
    });

          document.addEventListener("DOMContentLoaded", function() {
              // Replace 'YOUR_API_KEY' with your actual Finnhub API key
              const apiKey = 'cjtnki9r01qr9581rns0cjtnki9r01qr9581rnsg';
              const symboql = 'GOOGL'; // Google's stock symbol on Finnhub
          
              const apiUrl = `https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${apiKey}`;
          
              fetch(apiUrl)
                  .then(response => response.json())
                  .then(data => {
                      const stockPrice = data.c; // 'c' represents the current price in the Finnhub API response
                      document.getElementById('stockPrice').innerText = `Current Price: $${stockPrice}`;
                  })
                  .catch(error => console.error('Error fetching stock price:', error));
          });
          </script>
</body>
</html>
<h1 class="center">Here is the AI Prediction: </h1>

<p class='center'>THE STOCK WILL GO UP</p>
<canvas id="stockChart" class="center" width="200" height="100"></canvas>
